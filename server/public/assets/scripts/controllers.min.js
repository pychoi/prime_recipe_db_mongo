/*! recipe_db_app 2015-11-25 */
myApp.controller("EnterController",["$scope","$http","DataService",function(a,b,c){a.dataService=c,a.recipe={},a.recipe.ingredients=[],a.recipe.instructions=[{step:1}],a.recipe.categories=[],a.ingredient={},a.disable=!1,a.checkIngredient=!0,a.newRecipe={},a.searchMode=!0,a.main=a.dataService.mainArray(),a.cuisine=a.dataService.cuisineArray(),a.type=a.dataService.dishTypeArray(),a.addIngredient=function(){a.recipe.ingredients.push(a.ingredient),a.checkIngredient=!1,a.ingredient={},a.enterIngredients.$setUntouched()},a.deleteIngredient=function(b){for(var c=0;c<a.recipe.ingredients.length;c++)b.name==a.recipe.ingredients[c].name&&b.amount==a.recipe.ingredients[c].amount&&a.recipe.ingredients.splice(c,1);a.recipe.ingredients.length<1&&(a.checkIngredient=!0)},a.addNewStep=function(){var b=a.recipe.instructions.length+1;a.recipe.instructions.push({step:b})},a.removeStep=function(b){for(var c=0;c<a.recipe.instructions.length;c++)b.step==a.recipe.instructions[c].step&&a.recipe.instructions.splice(c,1);for(var c=0;c<a.recipe.instructions.length;c++)a.recipe.instructions[c].step=c+1},a.checkInstruction=function(b){for(var c=0;c<b.length;c++)b[c].instruction&&(a.noStepErrorMessage=!1,a.accordion=4)},a.toggleChecked=function(b){-1===a.recipe.categories.indexOf(b)?a.recipe.categories.push(b):a.recipe.categories.splice(a.recipe.categories.indexOf(b),1)},a.submitRecipe=function(){b.post("/submit/",a.recipe).then(function(b){a.newRecipe=b.data,a.successMessage="Recipe is entered!",a.searchMode=!1})}}]),myApp.controller("HomeController",["$scope","$http",function(a,b){a.randomResult={},a.randomRecipe=function(){b.get("/random/").then(function(b){a.randomResult=b.data})},a.randomRecipe(),a.modalShown=!1,a.toggleModal=function(){a.modalShown=!a.modalShown},a.saveSuccessMessage=!1,a.addToMealPlan=function(c){b.put("/user/mealPlan",c).then(function(){a.saveSuccessMessage=!0})}}]),myApp.controller("ListController",["$scope","$http",function(a,b){console.log("ListController is working!"),a.noSavedRecipesMessage=!1,a.savedList=[],a.checkSaved=!0,a.getList=function(){b.get("/user/groceriesList").then(function(b){a.savedList=b.data.groceriesList,a.savedList.length<1&&(a.noSavedRecipesMessage=!0)})},a.removeFromList=function(c){b.put("/user/groceriesList/remove",c).then(function(){console.log("removed from list"),a.getList()})},a.resetList=function(){b["delete"]("/user/groceriesList").then(function(){a.getList()})},a.toggleModal=function(b){a.modalShown=!a.modalShown,a.currentIndex=a.savedList.indexOf(b)},a.getList()}]),myApp.controller("MealController",["$scope","$http",function(a,b){console.log("MealController is working!"),a.randomResult={},a.savedRecipes=[],a.noSavedRecipesMessage=!1,a.modalShown=!1,a.currentIndex,a.checkRandom=!1,a.checkSaved=!0,a.randomRecipe=function(){b.get("/random/").then(function(b){a.randomResult=b.data,a.checkRandom=!0})},a.getSavedRecipes=function(){b.get("/user/mealPlan").then(function(b){a.savedRecipes=b.data.mealSaved,a.savedRecipes.length<1&&(a.noSavedRecipesMessage=!0)})},a.removeFromMealPlan=function(c){b.put("/user/mealPlan/remove",c).then(function(){a.getSavedRecipes()})},a.toggleModal=function(b){a.modalShown=!a.modalShown,a.currentIndex=a.savedRecipes.indexOf(b)},a.addToList=function(c){b.put("/user/groceriesList",c).then(function(){a.disableButton=!0})},a.getSavedRecipes()}]),myApp.controller("ResultController",["$scope","$location","$http","$routeParams",function(a,b,c,d){console.log("ResultController is working!"),a.resultArray=[],a.query=d.query,a.url=b.absUrl(),a.checkType=typeof a.query,"object"==a.checkType?c.get("/search/categories",{params:a.query}).then(function(b){console.log(b.data),a.resultArray=b.data,a.numberOfResults=a.resultArray.length}):c.get("/search/keyword",{params:{keyword:a.query}}).then(function(b){console.log(b.data),a.resultArray=b.data,a.numberOfResults=a.resultArray.length}),a.modalShown=!1,a.currentIndex,a.toggleModal=function(b){a.modalShown=!a.modalShown,a.currentIndex=a.resultArray.indexOf(b)},a.saveSuccessMessage=!1,a.addToMealPlan=function(b){c.put("/user/mealPlan",b).then(function(){a.saveSuccessMessage=!0})}}]),myApp.controller("SearchController",["$scope","$http","DataService","$location",function(a,b,c,d){console.log("search controller is here!"),a.dataService=c,a.search={},a.search.categories=[],a.search.keyword="",a.searchMode=!0,a.resultArray=[],a.main=a.dataService.mainArray(),a.cuisine=a.dataService.cuisineArray(),a.type=a.dataService.dishTypeArray(),a.toggleChecked=function(b){-1===a.search.categories.indexOf(b)?a.search.categories.push(b):a.search.categories.splice(a.search.categories.indexOf(b),1)},a.searchKeyword=function(a){d.path("/result").search({query:a})},a.searchCategories=function(){d.path("/result").search({query:{categories:a.search.categories}})}}]);